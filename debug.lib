http://developer.mbed.org/users/simon/code/debug/#253a34b5ca2f
